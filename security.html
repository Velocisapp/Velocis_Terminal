<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        body { margin: 0; background: #010406; overflow: hidden; font-family: 'Courier New', monospace; width: 100vw; height: 100vh; }
        canvas { display: block; position: absolute; top: 0; left: 0; z-index: 1; }
        #ui { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 2; }
        
        #header-box { 
            position: absolute; top: 20px; left: 5%; width: 90%; 
            border: 2px solid #FFD700; padding: 10px; background: rgba(0,20,20,0.9); 
            box-sizing: border-box; transition: all 0.5s ease;
        }
        #brand-title { color: #FFD700; font-size: 16px; font-weight: 900; }
        #clock { color: #FFD700; font-size: 22px; font-weight: bold; }

        @keyframes marquee { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }
        @keyframes alertBoxPulse { 
            0% { border-width: 2px; box-shadow: 0 0 5px #FF3131; } 
            50% { border-width: 5px; box-shadow: 0 0 20px #FF3131; } 
            100% { border-width: 2px; box-shadow: 0 0 5px #FF3131; } 
        }

        .ticker-wrap {
            position: absolute; bottom: 0; width: 100%; height: 50px; 
            background: rgba(60, 0, 0, 0.95); border-top: 4px solid #FF3131; 
            display: flex; align-items: center; overflow: hidden;
        }
    </style>
</head>
<body>
    <canvas id="engine"></canvas>
    <div id="ui">
        <div id="header-box">
            <div id="brand-title">VELOCIS™ SECURITY HUB</div>
            <div style="height: 2px; background: #FFD700; margin: 8px 0;"></div>
            <div id="clock">TIME: --:--:--</div>
        </div>
        <div class="ticker-wrap">
            <div id="ticker-text" style="white-space: nowrap; color: #FF3131; font-weight: 900; font-size: 20px; animation: marquee 12s linear infinite;">
                TERMINAL 3 | SECURITY STATUS: ALPHA | VELOCIS™ HUB ACTIVE
            </div>
        </div>
    </div>

<script>
    const canvas = document.getElementById('engine');
    const ctx = canvas.getContext('2d');
    function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
    window.addEventListener('resize', resize); resize();

    const gates = [
        { id: "B12", pos: 0.18, status: "BOARDING" }, 
        { id: "B14", pos: 0.39, status: "BOARDING" },
        { id: "A05", pos: 0.61, status: "ON TIME" }, 
        { id: "A07", pos: 0.83, status: "FINAL CALL" }
    ];

    const dots = Array.from({ length: 35 }, () => ({
        x: Math.random() * canvas.width, y: canvas.height + 20,
        speed: 0.4 + Math.random() * 0.8, 
        targetGate: Math.floor(Math.random() * gates.length)
    }));

    // RESTORED: Original Sleek Arrow with Palpitation Math
    function drawSleekArrow(x, y, color, dark) {
        ctx.save(); ctx.translate(x, y);
        const pulse = Math.abs(Math.sin(Date.now() / 300)) * 15;
        ctx.shadowBlur = 10 + pulse; 
        ctx.shadowColor = color;
        
        ctx.fillStyle = dark; 
        ctx.beginPath();
        ctx.moveTo(-35, 7); ctx.lineTo(0, -45); ctx.lineTo(35, 7); 
        ctx.lineTo(17, 7); ctx.lineTo(17, 50); ctx.lineTo(-17, 50); 
        ctx.lineTo(-17, 7); ctx.fill();

        let faceGrd = ctx.createLinearGradient(0, -40, 0, 50);
        faceGrd.addColorStop(0, '#FFFFFF'); faceGrd.addColorStop(0.3, color); faceGrd.addColorStop(1, dark);
        ctx.fillStyle = faceGrd; 
        ctx.beginPath();
        ctx.moveTo(-35, 7); ctx.lineTo(0, -45); ctx.lineTo(35, 7); 
        ctx.lineTo(17, 7); ctx.lineTo(17, 45); ctx.lineTo(-17, 45); 
        ctx.lineTo(-17, 7); ctx.fill();
        ctx.restore();
    }

    function draw() {
        ctx.fillStyle = '#010406'; ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        const hasFinalCall = gates.some(g => g.status === "FINAL CALL");
        const hb = document.getElementById('header-box');
        if (hasFinalCall) {
            hb.style.animation = 'alertBoxPulse 1s infinite ease-in-out';
            hb.style.borderColor = '#FF3131';
        }

        gates.forEach((g) => {
            const gx = canvas.width * g.pos; 
            // Moved the base height (gy) up to 65% to make room for arrows
            const gy = canvas.height * 0.65; 
            let color = (g.status === "ON TIME") ? '#FFD700' : '#FF3131';
            let dark = (g.status === "ON TIME") ? '#8B6B00' : '#8B0000';
            
            // Pulsating Hub Beams
            const pGrd = ctx.createLinearGradient(gx-35, 0, gx+35, 0);
            pGrd.addColorStop(0, 'transparent'); pGrd.addColorStop(0.5, 'rgba(0, 212, 255, 0.35)'); pGrd.addColorStop(1, 'transparent');
            ctx.fillStyle = pGrd; ctx.fillRect(gx-35, 0, 70, gy);

            // Re-anchored Original Arrow - Positioned lower than text
            drawSleekArrow(gx, gy + 80 + Math.sin(Date.now()/400)*10, color, dark);

            // MOVED UP: Gate Data (Higher Y values mean lower on screen, so we subtract)
            ctx.textAlign = "center"; ctx.fillStyle = '#FFF'; ctx.font = '900 13px Courier New';
            ctx.fillText("GATE", gx, gy - 60); // Shifted up from original
            ctx.fillStyle = color; ctx.font = '900 42px Courier New';
            ctx.fillText(g.id, gx, gy - 20); // Shifted up from original
            ctx.font = 'bold 15px monospace';
            ctx.fillText(g.status, gx, gy + 15);
        });

        dots.forEach(d => {
            const gx = canvas.width * gates[d.targetGate].pos; const gy = canvas.height * 0.65;
            d.x += (gx - d.x) * 0.015; d.y -= d.speed;
            if (d.y < gy) d.y = canvas.height + 20;
            ctx.fillStyle = '#00FFFF'; ctx.beginPath(); ctx.arc(d.x, d.y, 2.5, 0, Math.PI*2); ctx.fill();
        });
        requestAnimationFrame(draw);
    }
    draw();
    setInterval(() => { document.getElementById('clock').innerText = `TIME: ${new Date().toLocaleTimeString('en-GB')}`; }, 1000);
</script>
</body>
</html>
